FROM ghcr.io/open-webui/open-webui:main

# Copy only the essential demo mode backend files
COPY --chown=0:0 ./backend/open_webui/routers/auths.py /app/backend/open_webui/routers/auths.py
COPY --chown=0:0 ./backend/open_webui/demo_auth_data.py /app/backend/open_webui/demo_auth_data.py
COPY --chown=0:0 ./backend/open_webui/utils/auth.py /app/backend/open_webui/utils/auth.py
COPY --chown=0:0 ./backend/open_webui/config.py /app/backend/open_webui/config.py
COPY --chown=0:0 ./backend/open_webui/main.py /app/backend/open_webui/main.py

# Set environment variable
ENV ENABLE_DEMO_MODE=true