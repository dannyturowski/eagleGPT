FROM ghcr.io/open-webui/open-webui:main

# Copy our custom backend files
COPY --chown=0:0 ./backend/open_webui/routers/auths.py /app/backend/open_webui/routers/auths.py
COPY --chown=0:0 ./backend/open_webui/demo_auth_data.py /app/backend/open_webui/demo_auth_data.py
COPY --chown=0:0 ./backend/open_webui/utils/auth.py /app/backend/open_webui/utils/auth.py
COPY --chown=0:0 ./backend/open_webui/config.py /app/backend/open_webui/config.py
COPY --chown=0:0 ./backend/open_webui/main.py /app/backend/open_webui/main.py

# Copy our custom frontend files
COPY --chown=0:0 ./src/routes/+layout.svelte /app/src/routes/+layout.svelte
COPY --chown=0:0 ./src/lib/utils/demo.js /app/src/lib/utils/demo.js
COPY --chown=0:0 ./src/lib/components/chat/MessageInput.svelte /app/src/lib/components/chat/MessageInput.svelte
COPY --chown=0:0 ./src/lib/components/common/SettingsModal.svelte /app/src/lib/components/common/SettingsModal.svelte
COPY --chown=0:0 ./src/lib/apis/index.ts /app/src/lib/apis/index.ts

# Set environment variable
ENV ENABLE_DEMO_MODE=true

